

/* web/pkgs/js/graph.min.js */
function graph_init(r,l){return gr={},gr.auto=1,gr.dBm=0,gr.db_units="dB",gr.speed=1,gr.marker=-1,gr.threshold=0,gr.averaging=!1,gr.avg_dB=0,gr.divider=!1,gr.max=0,gr.min=0,gr.hi=0,gr.lo=0,gr.goalH=0,gr.goalL=0,gr.scroll=0,gr.scaleWidth=60,gr.hysteresis=15,gr.padding_tb=0,gr.xi=0,gr.secs_last=0,gr.redraw_scale=!1,gr.clr_color="mediumBlue",gr.bg_color="ghostWhite",gr.grid_color="lightGrey",gr.scale_color="white",gr.last_last=0,gr.cv=r,gr.ct=r.ctx,gr.auto=1,gr.dBm=w3_opt(l,"dBm",0),gr.speed=w3_opt(l,"speed",1),gr.averaging=w3_opt(l,"averaging",!1),gr.plot_color=w3_opt(l,"color","black"),gr.dBm?(gr.padding_tb=20,gr.db_units="dBm"):(gr.db_units="dB",gr.padding_tb=0),gr}function graph_clear(r){var l=r.ct;l.fillStyle=r.clr_color,l.fillRect(0,0,r.cv.width-r.scaleWidth,r.cv.height),r.xi=r.cv.width-r.scaleWidth,graph_rescale(r)}function graph_rescale(r){r.redraw_scale=!0}function graph_mode(r,l,e,a){r.auto="auto"==l?1:0,r.auto||(r.max=e,r.min=a),graph_rescale(r)}function graph_speed(r,l){l<1&&(l=1),r.speed=l}function graph_marker(r,l){r.marker=l}function graph_annotate(r,l){r.divider=l}function graph_threshold(r,l){r.threshold=l}function graph_averaging(r,l){r.averaging=l,r.avg_dB=0}function graph_plot(r,l,e){var a=w3_opt(e,"color",r.plot_color),i=w3_opt(e,"line",!1),t=r.cv,o=r.ct,g=t.width-r.scaleWidth,d=t.height,c=g-r.xi,s=r.hi-r.lo,n=function(l){var e=(l-r.lo)/s;return Math.round(d-e*d)},h=function(r){return 10*Math.ceil(r/10)},_=!1;if(r.redraw_scale||r.auto){if(r.auto){var f=.25/r.speed;r.goalH=r.goalH>l+r.padding_tb?r.goalH-f:l+r.padding_tb,r.goalL=r.goalL<l-r.padding_tb?r.goalL+f:l-r.padding_tb}else r.goalH=r.max,r.goalL=r.min,_=!0;if(r.goalL>r.lo+r.hysteresis||r.goalL<r.lo||_){var p=function(r){return 10*Math.floor(r/10)}(r.goalL)-5,v=r.hi-p;if(p<=r.lo){var u=s/v;c&&(o.drawImage(t,r.xi,0,c,d,r.xi,0,c,d*u),o.fillStyle=r.bg_color,o.fillRect(r.xi,Math.floor(u*d),c,d*(1-u)+1))}else{var m=v/s;c&&o.drawImage(t,r.xi,0,c,d*m,r.xi,0,c,d)}r.lo=p,s=v,r.auto&&(r.redraw_scale=!0)}if(r.goalH>r.hi||r.goalH<r.hi-r.hysteresis||_){var w=h(r.goalH)+5;v=w-r.lo;if(w>=r.hi){u=s/v;c&&(o.drawImage(t,r.xi,0,c,d,r.xi,d*(1-u),c,d*u),o.fillStyle=r.bg_color,o.fillRect(r.xi,0,c,Math.ceil(d*(1-u))))}else{m=v/s;c&&o.drawImage(t,r.xi,d*(1-m),c,d*m,r.xi,0,c,d)}r.hi=w,s=w-r.lo,r.auto&&(r.redraw_scale=!0)}}if(r.redraw_scale){o.fillStyle=r.clr_color,o.fillRect(g,0,r.scaleWidth,d),o.fillStyle=r.scale_color,o.font="10px Verdana";for(var x=r.lo;(x=h(x))<=r.hi;x++)o.fillText(x+" "+r.db_units,g+2,n(x)+4,r.scaleWidth);r.redraw_scale=!1}var y=!1;if(++r.scroll>=r.speed){r.scroll=0,r.xi>0&&r.xi--,o.drawImage(t,1,0,g-1,d,0,0,g-1,d);var b=(new Date).getTime()/1e3,S=Math.floor(b/r.marker),B=Math.floor(r.secs_last/r.marker);if(-1==r.marker||S==B){o.fillStyle=r.bg_color,o.fillRect(g-1,0,1,d),o.fillStyle=r.grid_color;for(x=r.lo;(x=h(x))<=r.hi;x++)o.fillRect(g-1,n(x),1,1)}else r.secs_last=b,o.fillStyle=r.grid_color,o.fillRect(g-1,0,1,d);if(0!=r.divider){var R=o.fillStyle;o.fillStyle=r.divider,o.fillRect(g-1,0,1,d),r.divider=!1,o.fillStyle=R}r.threshold&&(o.fillStyle="red",o.fillRect(g-1,n(r.threshold),1,1)),y=!0}if(r.averaging){var k=(r.avg_dB*(r.speed-1)+l)/r.speed;l=r.avg_dB=k}var H=null;if(!r.averaging||y||0!=i){var L=n(l);0!=i?(o.strokeStyle=a,o.beginPath(),o.moveTo(g-1,i),o.lineTo(g,L),H=L,o.stroke()):(o.fillStyle=a,o.fillRect(g-1,L,1,1))}return H}